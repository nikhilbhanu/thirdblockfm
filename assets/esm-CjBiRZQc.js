const y=(r,h=4294967295,f=79764919)=>{const a=new Int32Array(256);let n,c,e,o=h;for(n=0;n<256;n++){for(e=n<<24,c=8;c>0;--c)e=2147483648&e?e<<1^f:e<<1;a[n]=e}for(n=0;n<r.length;n++)o=o<<8^a[255&(o>>24^r[n])];return o},A=(r,h=y)=>{const f=t=>new Uint8Array(t.length/2).map((s,m)=>parseInt(t.substring(2*m,2*(m+1)),16)),a=t=>f(t)[0],n=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach((t,s)=>n.set(t,s));const c=new Uint8Array(r.length);let e,o,u,l=!1,b=0,g=42,p=r.length>13&&r.substring(0,9)==="dynEncode",i=0;p&&(i=11,o=a(r.substring(9,i)),o<=1&&(i+=2,g=a(r.substring(11,i))),o===1&&(i+=8,u=(t=>new DataView(f(t).buffer).getInt32(0,!0))(r.substring(13,i))));const w=256-g;for(let t=i;t<r.length;t++)if(e=r.charCodeAt(t),e!==61||l){if(e===92&&t<r.length-5&&p){const s=r.charCodeAt(t+1);s!==117&&s!==85||(e=parseInt(r.substring(t+2,t+6),16),t+=5)}if(e>255){const s=n.get(e);s&&(e=s+127)}l&&(l=!1,e-=64),c[b++]=e<g&&e>0?e+w:e-g}else l=!0;const d=c.subarray(0,b);if(p&&o===1){const t=h(d);if(t!==u){const s="Decode failed crc32 validation";throw console.error("`simple-yenc`\n",s+`
`,"Expected: "+u+"; Got: "+t+`
`,"Visit https://github.com/eshaz/simple-yenc for more information"),Error(s)}}return d};export{A as e};
