import{g as v}from"./index-BuL---PX.js";import{e as A}from"./esm-CjBiRZQc.js";function r(){const P=Uint8Array,l=Float32Array;r.modules||Object.defineProperties(r,{modules:{value:new WeakMap},setModule:{value(i,e){r.modules.set(i,Promise.resolve(e))}},getModule:{value(i,e){let t=r.modules.get(i);return t||(e?t=WebAssembly.compile(A(e)):(e=i.wasm,t=r.inflateDynEncodeString(e).then(H=>WebAssembly.compile(H))),r.modules.set(i,t)),t}},concatFloat32:{value(i,e){let t=new l(e),H=0,s=0;for(;H<i.length;)t.set(i[H],s),s+=i[H++].length;return t}},getDecodedAudio:{value:(i,e,t,H,s)=>({errors:i,channelData:e,samplesDecoded:t,sampleRate:H,bitDepth:s})},getDecodedAudioMultiChannel:{value(i,e,t,H,s,o){let a=[],h,I;for(h=0;h<t;h++){const n=[];for(I=0;I<e.length;)n.push(e[I++][h]||[]);a.push(r.concatFloat32(n,H))}return r.getDecodedAudio(i,a,H,s,o)}},inflateDynEncodeString:{value(i){return i=A(i),new Promise(e=>{const t=String.raw`dynEncode0128e975dc2c()((()>+*§§)§,§§§§)§+§§§)§+.-()(*)-+)(8.7*§)i¸¸,3§(i¸¸,3/G+.¡*(,(,3+)2å:-),§H(P*DI*H(P*@I++hH)H*r,hH(H(P*<J,i)^*<H,H(P*4U((I-H(H*i0J,^*DH+H-H*I+H,I*4)33H(H*H)^*DH(H+H)^*@H+i§H)i§3æ*).§K(iHI/+§H,iHn,§H+i(H+i(rCJ0I,H*I-+hH,,hH(H-V)(i)J.H.W)(i)c)(H,i)I,H-i*I-4)33i(I.*hH(V)(H+n5(H(i*I-i(I,i)I.+hH,i*J+iHn,hi(I-i*I,+hH,H/H-c)(H,iFn,hi(I,+hH,H0n5-H*V)(J(,hH/H(i)J(H(V)(J(i)c)(H)H(i)H,c)(3H*i*I*H,i)I,4(3(-H(H,W)(H-I-H,i*I,4)3(3(3H,H-I1H+I,H.i)H1V)(J.i(v5(33H.-H(H,i(c)(H,i*I,4)333)-§i*I*+§H*iHn,hi73H,H(i)8(H+J+H)P*(H*V)(J-r,§H)P*,H.i)H+H,i)V)(-H*i*I*H+i)I+H-H.I.H,H-i)I,4)333Ã+)-§iø7i(^*(iü7I,*h+hH+iDn,h*hilI+i)I,+hH+,hH+iô7H,c)(i)H+i´8W)(H,I,H+i*I+4)-+hH(H)8*J-i(p5.*h*h*hH-i')u,hH(P*(J+,hH(P*0J,H(P*,n50H+H,H-b((3H(P*0i)I.4)3H-i¨*n5*H-iÅ*s,hi73H-i)J+V)&+I,H(H+V)æ,8(I.H(H*8*J-i(p51H-i)J+i¸7V)(H(H+iø7V)(8(J/H(P*0J+s,hi73H+H,H.J,I.H(P*(m5(H.H(P*,s5.+hH,m5*H(P*(J.H+H.H+H/U((b((H(H(P*0i)J+^*0H,i)I,4(3(3H(H.^*03H-i¨*o5)33i(73(3(3-H,H+i)c)(H,i*I,H+i)I+4)33i)I-3H-3!2)0§K(i2J,L(H,H(^*(H,H*^*4H,i(^*0H,i(^*DH,j(_*<H,H)P*(^*,H,H+P*(^*8*h*h+hH,i)8(I3i§I**h*h*h*h*h*h*hH,i*8(6+(),03H,j(_*@i*I-H,P*<J.i,J(H,P*8J/s50H,H.i+J0^*<i¦I*H.H,P*4J1J.U(*H.U((J2i')o5/H.U()I.H,H(^*<H0H1U((H.i0J.i§i0i')o5/H/H.H2J*H(J.q50H,P*0J/H*I-H,P*(J0,hH,P*,H-q,hi)I-423+hH*m5+H/H0H(H1U((b((H/i)I/H(i)I(H*i)I*4(3(3H,H.^*<H,H-^*04*3iØ1U((5+i(I(i¨7i1^*(i$6iè1^*(i°7iè6^*(i¬7iÈ6^*(+hH(iÈ*n,hiÈ*I(+hH(i¨,n,hi¨,I(+hH(iØ,n,hiØ,I(+hH(iè,o,hH,i-H(i0c)(H(i*I(4)33iè1i1H,i-iÈ*8)Bi(I(+hH(ido,hH,i-H(i-c)(H(i*I(4)33iÈ6iè6H,i-iF8)BiØ1i)b((41-H,i-H(i/c)(H(i*I(4)3(3(-H,i-H(i1c)(H(i*I(4)3(3(-H,i-H(i0c)(H(i*I(4)3(3(3H,H/^*0H,H(^*<3i(I*4*3H,H,i¸)^*TH,H,iø-^*PH,H,iX^*LH,H,i(^*HH,i-8(I(H,i-8(I-i¥I*H,i,8(I.H(iErH-iEr5)H(i©*I1H-i)I0i(i;H.i,J(i(H(i(rCJ(J*H*i;sCI*i¨1I-H(I/+hH/,hH,i-H-V)(i)H,i+8(c)(H/i)I/H-i*I-H*i)I*4)-H(i)i¨1I/+hH(H*o,hH,i-H/V)(i)i(c)(H/i*I/H(i)I(4)33i¤I*H,iø-H,i¸)H,i-i;8)5+H0H1I2i(I-+hH-H2p,hH,H,iP8*J*i(p5-H*i7u,hH,i-H-i)H*c)(H-i)I-4*3i(I/i+I.i+I(*h*h*hH*i86*(*)3H-m,hi£I*403H-i)H,W)-I/i*I(4)3i3I.i/I(3H2H,H(8(H.J(H-J.p,hi¢I*4.3H,i-H-i)I*+hH(,hH*H/c)(H*i*I*H(i)I(4)-H.I-4+3(3(33H,W)1m,hiI*4,3H,iø-H,i¸)H,i-H18)J(,hi¡I*H(i(p5,H1H,V)ú-H,V)ø-o5,3H,i(H,iXH,i-H1i)H08)J(,hi I*H(i(p5,H0H,V)H,V)o5,3H,H,iPH,iH8+I*4+3(3(3H,i$6i¬78+I*3H*H3m5(3i)I-H*i(r5)3H)H,P*0^*(H+H,P*<^*(H*I-3H,i2L(H-33Á)+(i¨03b+(,(-(.(/(0(1(2(3(5(7(9(;(?(C(G(K(S([(c(k({(((«(Ë(ë((*)(iø03O)()()()(*(*(*(*(+(+(+(+(,(,(,(,(-(-(-(-(i¨13M8(9(:(((0(/(1(.(2(-(3(,(4(+(5(*(6()(7(T7*S7US0U `;r.getModule(r,t).then(H=>WebAssembly.instantiate(H,{})).then(({exports:H})=>{const s=new Map(Object.entries(H)),o=s.get("puff"),a=s.get("memory").buffer,h=new P(a),I=new DataView(a);let n=s.get("__heap_base");const u=i.length,d=n;n+=4,I.setInt32(d,u,!0);const g=n;n+=u,h.set(i,g);const c=n;n+=4,I.setInt32(c,h.byteLength-n,!0),o(n,c,g,d),e(h.slice(n,n+I.getInt32(c,!0)))})})}}}),Object.defineProperty(this,"wasm",{enumerable:!0,get:()=>this._wasm}),this.getOutputChannels=(i,e,t)=>{let H=[],s=0;for(;s<e;)H.push(i.slice(s*t,s++*t+t));return H},this.allocateTypedArray=(i,e,t=!0)=>{const H=this._wasm.malloc(e.BYTES_PER_ELEMENT*i);return t&&this._pointers.add(H),{ptr:H,len:i,buf:new e(this._wasm.HEAP,H,i)}},this.free=()=>{this._pointers.forEach(i=>{this._wasm.free(i)}),this._pointers.clear()},this.codeToString=i=>{const e=[],t=new Uint8Array(this._wasm.HEAP);for(let H=t[i];H!==0;H=t[++i])e.push(H);return String.fromCharCode.apply(null,e)},this.addError=(i,e,t,H,s,o)=>{i.push({message:e,frameLength:t,frameNumber:H,inputBytes:s,outputSamples:o})},this.instantiate=(i,e)=>(e&&r.setModule(i,e),this._wasm=new i(r).instantiate(),this._pointers=new Set,this._wasm.ready.then(()=>this))}var y,_;function E(){return _||(_=1,y=Worker),y}var V=E();const W=v(V),D=()=>globalThis.Worker||W;class S extends D(){constructor(l,i,e,t){r.modules||new r;let H=r.modules.get(e);if(!H){let s="text/javascript",o,a=`'use strict';(${((h,I,n)=>{let u,d,g=new Promise(c=>{d=c});self.onmessage=({data:{id:c,command:p,data:m}})=>{let f=g,J={id:c},b;p==="init"?(Object.defineProperties(h,{WASMAudioDecoderCommon:{value:I},EmscriptenWASM:{value:n},module:{value:m.module},isWebWorker:{value:!0}}),u=new h(m.options),d()):p==="free"?u.free():p==="ready"?f=f.then(()=>u.ready):p==="reset"?f=f.then(()=>u.reset()):(Object.assign(J,u[p](Array.isArray(m)?m.map(w=>new Uint8Array(w)):new Uint8Array(m))),b=J.channelData?J.channelData.map(w=>w.buffer):[]),f.then(()=>self.postMessage(J,b))}}).toString()})(${e}, ${r}, ${t})`;try{o=typeof process.versions.node<"u"}catch{}H=o?`data:${s};base64,${Buffer.from(a).toString("base64")}`:URL.createObjectURL(new Blob([a],{type:s})),r.modules.set(e,H)}super(H,{name:i}),this._id=Number.MIN_SAFE_INTEGER,this._enqueuedOperations=new Map,this.onmessage=({data:s})=>{const{id:o,...a}=s;this._enqueuedOperations.get(o)(a),this._enqueuedOperations.delete(o)},new t(r).getModule().then(s=>{this.postToDecoder("init",{module:s,options:l})})}async postToDecoder(l,i){return new Promise(e=>{this.postMessage({command:l,id:this._id,data:i}),this._enqueuedOperations.set(this._id++,e)})}get ready(){return this.postToDecoder("ready")}async free(){await this.postToDecoder("free").finally(()=>{this.terminate()})}async reset(){await this.postToDecoder("reset")}}const O=(P,l)=>{Object.defineProperty(P,"name",{value:l})};export{r as W,S as a,O as b};
